import { genPathResolve } from '@huiji/shared-utils';
import * as io from '@rimtrans/io';

const resolvePath = genPathResolve(__dirname, '..');

const modSets = [
  [
    735106432,
    818773962,
    725956940,
    753498552,
    715565817,
    715565262,
    761421485,
    932008009,
    725747149,
    754637870,
    839005762,
    1180721235,
    725465444,
    798158924,
    761219125,
    717575199,
    728314182,
    724602224,
    848972794,
    708455313,
    712141500,
    1501832876,
    1423699208,
    946390822,
    1279012058,
    704181221,
    705924057,
    732569232,
    927155256,
    826366050,
  ],
  [
    722085442,
    1185265132,
    725949967,
    725947920,
    725576127,
    709317151,
    746425621,
    1516158345,
    836308268,
    1372003680,
    1098354593,
    731111514,
    1561221991,
    730854291,
    1454024362,
    747645520,
    758810805,
    1180719658,
    760088748,
    962732083,
    1356838246,
    1478936958,
    1544944259,
    1508850027,
    1544626521,
    1543177113,
    818322128,
    849231601,
    736139206,
    1204108550,
  ],
  [
    1216999901,
    733997423,
    972057888,
    736207111,
    1507748539,
    1414302321,
    729690064,
    867467808,
    736172213,
    732257433,
    1127530465,
    1158568885,
    1552507180,
    725447220,
    726244033,
    1505423207,
    1253251478,
    947972722,
    761315214,
    1055485938,
    1113137502,
    1217001091,
    815039373,
    765890823,
    725952322,
    735241897,
    1616643195,
    1386412863,
    918226861,
    1185906628,
  ],
  [
    1134165362,
    751049133,
    1543561093,
    1541460369,
    777197241,
    1354114366,
    1470065926,
    937331021,
    725488168,
    1552146295,
    918200645,
    1539028008,
    1188485723,
    1319782555,
    973091113,
    1446523594,
    784327493,
    1541721856,
    1180826364,
    1185274792,
    935982361,
    728381322,
    1136958577,
    764375772,
    826998327,
    1185307686,
    838336462,
    725153576,
    857350593,
    850429707,
  ],
  [
    928376710,
    1539311991,
    830221184,
    1185269798,
    1157085076,
    826153738,
    735268789,
    1321849735,
    1192504741,
    1331961995,
    824831260,
    1509102551,
    942369931,
    1185276569,
    1541261044,
    751841890,
    1541438230,
    1355637255,
    731732064,
    1521844535,
    715759739,
    1508341791,
    725130005,
    833899765,
    769201959,
    1505914869,
    1187010034,
    1309994319,
    1571623829,
    745193823,
  ],
  [
    1338280929,
    704182588,
    1400238872,
    1207390617,
    949498803,
    1204502413,
    1551336515,
    817902482,
    1346113625,
    950475543,
    722086956,
    1508292711,
    1231617602,
    1185281838,
    726096646,
    1512478761,
    1076950211,
    1414697588,
    832333531,
    933324235,
    1400234784,
    1115882219,
    730936602,
    728315620,
    1496122245,
    1593245720,
    949283405,
    1180573408,
    774543761,
    771341092,
  ],
  [
    944669553,
    1095331978,
    724600171,
    1718190143,
    1511926373,
    1558635181,
    1420241138,
    1210535987,
    872762753,
    1631756268,
    1498706339,
    1139051045,
    1686660152,
    1201382956,
    726372052,
    1400227853,
    726479594,
    1447140290,
    1543060282,
    1613783924,
    1552452572,
    717632155,
    1211694919,
    1542424705,
    726121441,
    1224175982,
    794038005,
    1700683323,
    1502876618,
    1180719857,
  ],
  [
    1701592470,
    731997183,
    881100382,
    1539312975,
    1547692203,
    887716138,
    731287727,
    1628211313,
    915345933,
    1541064151,
    1467764609,
    766264659,
    1542915888,
    1504723424,
    1185278809,
    795240891,
    823626435,
    1553179450,
    1718191613,
    1123043922,
    850428056,
    1539309348,
    846222458,
    895944018,
    1539031321,
    1541064015,
    1100547661,
    1496570408,
    1400245220,
    1089876213,
  ],
  [
    1103809207,
    926698084,
    788610933,
    1537786185,
    830545304,
    773918229,
    1157350972,
    1214615921,
    1136819681,
    1421806244,
    1635565299,
    1541287769,
    1334289344,
    1438693028,
    964765466,
    727687246,
    1564657272,
    1498129268,
    1691076769,
    1508778962,
    1244299809,
    1541531035,
    1541250497,
    1507370392,
    1507384362,
    1221668621,
    1539311500,
    814732357,
    1171600778,
    736582456,
  ],
  [
    1503448404,
    1579516669,
    1752864297,
    859466666,
    1501435493,
    727710731,
    1542854752,
    1541978411,
    1438488634,
    719702781,
    730384702,
    932124891,
    1546370684,
    1677616980,
    1119191638,
    1339148170,
    1542036108,
    1541536041,
    1541438907,
    1091340782,
    1114619043,
    747397788,
    725471844,
    1347509620,
    936594912,
    1322328003,
    1323773476,
    1233906319,
    863427766,
    1542424432,
  ],
];

const workshopDir = '/mnt/d/Games/SteamLibrary/steamapps/workshop/content/294100';
const testModsDir = resolvePath('.tmp.mods');

async function copy(): Promise<void> {
  const mods = [
    ...new Set(
      modSets.reduce<number[]>((agg, cur) => {
        agg.push(...cur);
        return agg;
      }, []),
    ),
  ];

  await io.deleteFileOrDirectory(testModsDir);
  await io.createDirectory(testModsDir);

  for (const id of mods) {
    const source = io.join(workshopDir, `${id}`);
    const target = io.join(testModsDir, `${id}`);
    await io.copy(source, target);
    console.log('copy', source, target);
  }
}

copy().catch(error => {
  console.log(error);
  console.log(error.stack);
});
